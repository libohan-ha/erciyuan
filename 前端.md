前端：

- **登录/注册页 (`/login`, `/register`)**：入口。
- **首页/画廊 (`/`)**：登录后进入的页面。以瀑布流展示你**所有**的图片。顶部有搜索框，侧边栏有标签云和相册列表，用于筛选。
- **图片详情页 (`/images/:id`)**：展示大图、标题、描述、标签。提供“编辑”和“删除”按钮。
- **上传页 (`/upload`)**：一个表单，包含文件选择、标题、描述、标签输入框，以及一个“添加到相册”的下拉菜单。
- **个人中心 (`/profile`)**：
  - **基本信息**：展示头像、用户名，提供修改密码和更换头像的功能。
  - **我的相册**选项卡：管理所有相册（创建、删除、编辑）。

实现：

**1. API 请求封装 (`frontend/js/api.js`)**

创建一个统一的请求函数，例如 `async function request(url, options = {})`。

- 在函数内部，从 `localStorage` 获取 Token。
- 如果 Token 存在，自动添加到请求头 `Authorization: Bearer <token>`。
- 使用 `fetch` 发送请求。
- 统一处理响应，比如检查 `response.ok`，如果失败则 `throw new Error`。
- 这样，其他JS文件调用API时就不需要关心认证细节了。

**2. 认证状态管理 (`frontend/js/auth.js`)**

- `checkLoginStatus()`: 页面加载时运行，检查 `localStorage` 中是否有 Token。如果没有，则跳转到登录页。
- `login(token)`: 将 Token 存入 `localStorage`。
- `logout()`: 清除 `localStorage` 中的 Token，并跳转到登录页。

**3. 页面逻辑 (以 `gallery.js` 为例)**

- `DOMContentLoaded` 事件触发后，先调用 `checkLoginStatus()`。
- 调用 `api.request('/api/images')` 获取图片列表数据。
- 动态创建 DOM 元素（如 `<div class="image-card">`），将图片URL、标题等信息填入，并追加到画廊容器中。
- **瀑布流布局**：使用 CSS Grid 或 Flexbox 可以轻松实现。
- **搜索/筛选**：监听搜索框和标签的点击事件，重新调用带参数的API（如 `/api/images?tag=初音未来`），然后清空并重新渲染画廊。

**4. 文件上传 (`frontend/js/upload.js`)**

- 监听表单的 `submit` 事件。
- 阻止表单默认提交行为。
- 创建一个 `FormData` 对象。
- 将文件输入框的 `files[0]` 和其他文本输入框的值都 `append` 到 `FormData` 中。
- 使用 `api.request('/api/images', { method: 'POST', body: formData })` 发送请求。注意，`Content-Type` 请求头让浏览器自动设置为 `multipart/form-data`，无需手动设置。

















